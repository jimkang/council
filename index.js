!function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return i(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}}()({1:[function(t,e,n){"use strict";var r,i=t("route-state"),o=t("./render-edit-problem"),a=t("./render-display-problem"),s=t("./render-list-problems"),c=t("./store"),u=t("handle-error-web"),l=t("./data/welcome-problem.json"),h=t("./create-new-problem"),f=t("./problem"),p=f.makeProblemObject,_=f.serializeProblemForRoute;function d(t){var e=t.action,n=t.id,i=t.text,u=t.choices,h=t.councilSource;u&&(u=JSON.parse(u)),h&&(h=JSON.parse(h));var f={onDisplayProblemUpdate:m,onEditProblemUpdate:T,onDisplay:b,onDisplaySpecificProblem:k,onEdit:g,onList:x,onNew:w,onRememberProblem:v};"edit"!==e?"list"!==e?e&&n&&i&&u&&Array.isArray(u)&&!(u.length<1)?"display"===e&&a(Object.assign({problem:p({id:n,text:i,choices:u,councilSource:h})},f)):r.addToRoute(Object.assign(_(l),{action:"display"})):s(Object.assign({problemsData:c.getRememberedProblems()},f)):o(Object.assign({problem:p({id:n||l.id,text:i||l.text,choices:u||[],councilSource:h||{}})},f))}function y(t){var e=t.action,n=t.problem,i=t.followNewRouteAfterUpdating,o=void 0===i||i;r.addToRoute(Object.assign(_(n),{action:e}),o)}function m(t){y({action:"display",problem:t})}function v(t){c.rememberProblem(t)}function g(){r.addToRoute({action:"edit"})}function b(){r.addToRoute({action:"display"})}function x(){r.addToRoute({action:"list"})}function w(t){var e=t.waitingMessage;e.show({message:"Calling forth council for new problem…"}),h(function(t,n){e.hide(),t?u(t):function(t){y({action:"edit",problem:t,followNewRouteAfterUpdating:!0})}(n)})}function T(t){y({action:"edit",problem:t,followNewRouteAfterUpdating:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}function k(t){y({action:"display",problem:t,followNewRouteAfterUpdating:!0})}(r=i({followRoute:d,windowObject:window})).routeFromHash()},{"./create-new-problem":5,"./data/welcome-problem.json":6,"./problem":30,"./render-display-problem":31,"./render-edit-problem":32,"./render-list-problems":33,"./store":35,"handle-error-web":17,"route-state":28}],2:[function(t,e,n){"use strict";var r=t("./get-council"),i=t("standard-bail")();e.exports=function(t,e){r({numberOfMembers:t.choices.length},i(function(n){for(var r=n.councilResults,i=n.searchTerm,o=n.library,a=0;a<r.length&&a<t.choices.length;++a){var s=t.choices[a],c=r[a];s.presenterImageURL=c.url,s.imageTitle=c.title,s.imageSource=c.source}t.councilSource={searchTerm:i,library:o},e(null,t)},e))}},{"./get-council":8,"standard-bail":29}],3:[function(t,e,n){"use strict";e.exports={flickr:{key:"adfa37aedde851a68d289b279001c4cb",secret:"e9b3bb213dac1dd4"}}},{}],4:[function(t,e,n){"use strict";var r=t("idmaker").randomId,i=t("./get-council"),o=t("standard-bail")();e.exports=function(t,e){var n=t.library,a=t.searchTerm;i({numberOfMembers:1,library:n,searchTerm:a,retryCount:3},o(function(t){var i=t.councilResults;if(!i||i.length<1)e(new Error("No council results for library "+n+' and searchTerm "'+a+'".'));else{var o=i[0];e(null,{id:"choice-"+r(4),text:"<Click here to edit this choice>",presenterImageURL:o.url,imageTitle:o.title,imageSource:o.source})}},e))}},{"./get-council":8,idmaker:18,"standard-bail":29}],5:[function(t,e,n){"use strict";var r=t("idmaker").randomId,i=t("./change-council");e.exports=function(t){var e={id:"problem-"+r(4),text:"Here is a problem. <Click to edit this problem.>",presenterImageURL:"",choices:[{id:"default-choice-a",text:"You can do this. <Click to edit this choice.>"},{id:"default-choice-b",text:"Or you can do that. <Click to edit this choice.>"}]};i(e,t)}},{"./change-council":2,idmaker:18}],6:[function(t,e,n){e.exports={id:"problem-hello",text:"What is Council and how do I use it?",presenterImageURL:"",choices:[{id:"default-choice-a",text:"Council is an app that will put pictures of beings (people and animals, usually) next to text that you write.",presenterImageURL:"https://farm4.staticflickr.com/3878/14753591776_f70d2cb5ff.jpg",imageTitle:'Image from page 302 of "Annual report of the Fruit Growers\' Association of Ontario, 1896" (1897)',imageSource:"https://www.flickr.com/photos/126377022@N07/14753591776"},{id:"default-choice-b",text:'You write out your "problem" (or topic) and "choices" (or responses) that go with it. Then, you send it before a council! The council is just images of beings from various public domain image sources, like The British Library and the Library of Congress.',presenterImageURL:"https://farm3.staticflickr.com/2900/14775359564_4dd237c52b.jpg",imageTitle:'Image from page 265 of "General physiology of muscles and nerves" (1881)',imageSource:"https://www.flickr.com/photos/126377022@N07/14775359564"},{id:"choice-JqXx",text:"Each choice is presented by a different council member. It's like when NPCs in a video game like Baldur's Gate II or King of Dragon Pass all pipe up with advice for you!",presenterImageURL:"https://farm6.staticflickr.com/5595/14796483643_3862967b71.jpg",imageTitle:'Image from page 233 of "Webster\'s practical dictionary; a practical dictionary of the English language giving the correct spelling, pronunciation and definitions of words based on the unabridged dictionary of Noah Webster .." (1910)',imageSource:"https://www.flickr.com/photos/126377022@N07/14796483643"},{id:"choice-FAuz",text:'You can use to talk through things with yourself. Sometimes, just reading your choices back to yourself helps with thinking about a situation. In programming, this is sometimes called "rubber duck debugging" because you can gain insight into a problem by literally explaining your situation to a rubber duck.',presenterImageURL:"https://farm6.staticflickr.com/5577/14591120358_db886852f6.jpg",imageTitle:'Image from page 133 of "Sermons by Rev. Sam. P. Jones : as stenographically reported, and delivered in St. Louis, Cincinnati, Chicago, Baltimore, Atlanta, Nashville, Waco and other cities : with a history of his life, by Theodore M. Smith : with sermons b',imageSource:"https://www.flickr.com/photos/126377022@N07/14591120358"},{id:"choice-DkKN",text:'However, it can also apply to questions like "What should I make for dinner?" to "Should I interview for this job?" It\'s also good for exploring ideas that don\'t have a single answer like "Who is the best cat?"',presenterImageURL:"https://farm6.staticflickr.com/5557/14590058719_51fba67784.jpg",imageTitle:'Image from page 38 of "Animal products;" (1877)',imageSource:"https://www.flickr.com/photos/126377022@N07/14590058719"},{id:"choice-mhwk",text:'Or you can use it to explain things, like this "problem" is doing! Or just put pictures next to pieces of text. It\'s not unlike zombo.com, in that sense.',presenterImageURL:"https://farm6.staticflickr.com/5584/14589891909_2409a6fa68.jpg",imageTitle:'Image from page 103 of "Zoological Society bulletin" (1901)',imageSource:"https://www.flickr.com/photos/126377022@N07/14589891909"},{id:"choice-hfBm",text:'To view all of your problems, you can click on "All Problems" at the bottom of every view. To add a new problem, you can click "Add new problem" at the bottom of the All Problems view.',presenterImageURL:"https://farm3.staticflickr.com/2895/14589890249_71164196f1.jpg",imageTitle:'Image from page 27 of "Profit and pleasure in goat-keeping; a practical conservative treatise presenting in concrete form the advantages of the modern milch goat, the various breeds, their care and management" (1915)',imageSource:"https://www.flickr.com/photos/126377022@N07/14589890249"},{id:"choice-MaHU",text:'In the editing view, click on the Problem text to edit it, then click outside of it to complete editing. (Later on, you\'ll be able to hit Cmd+Enter to complete.) Click "Add choice" to add a new choice, then click on the choice to edit it. Finally, you can view it with a council by click "Send before a council"!',presenterImageURL:"https://farm4.staticflickr.com/3901/14777276752_b73f33365a.jpg",imageTitle:'Image from page 76 of "Christian faith in an age of science" (1903)',imageSource:"https://www.flickr.com/photos/126377022@N07/14777276752"},{id:"choice-PBXu",text:'In the council view, you can click "Change council" to get a new council if you\'d like your stuff presented to you by a fresh council. This may be the funnest part of the app.',presenterImageURL:"https://farm4.staticflickr.com/3902/14591134640_d91aa251d1.jpg",imageTitle:'Image from page 542 of "Transactions of the American Philosophical Society .." (1771)',imageSource:"https://www.flickr.com/photos/126377022@N07/14591134640"},{id:"choice-pZai",text:"Your problems are all kept locally in your browser. They are not shared anywhere else.",presenterImageURL:"https://farm4.staticflickr.com/3885/14774672731_6392180025.jpg",imageTitle:'Image from page 534 of "Transactions of the American Philosophical Society .." (1771)',imageSource:"https://www.flickr.com/photos/126377022@N07/14774672731"},{id:"choice-uhVL",text:"Have fun and enjoy your councils! Email jimkang@fastmail.com if you have questions.",presenterImageURL:"https://farm3.staticflickr.com/2940/14774479844_eebe4d5a90.jpg",imageTitle:'Image from page 307 of "Animal products;" (1877)',imageSource:"https://www.flickr.com/photos/126377022@N07/14774479844"}],councilSource:{library:"Internet Archive Book Images",searchTerm:"mammal"}}},{}],7:[function(t,e,n){"use strict";var r=t("probable"),i=t("d3-shape"),o=t("d3-array").range,a=i.area();a.curve(i.curveLinear);var s=4;function c(t){return t}e.exports=function(t){var e=t.direction,n=t.length,i=t.maxThickness;0===e[1]?(a.x0(e[0]<0?i:0),a.y(c)):(a.y0(e[1]<0?i:0),a.x(c));var u=10+r.rollDie(4),l=2+r.roll(2);return 0===e[1]?a.x1(h):a.y1(h),a(o(0+s,n-s,s));function h(t){var o=0;if(0===t||t>=n-s)(e[0]<0||e[1]<0)&&(o=i);else{var a=Math.sin(t/u)*i/l;o=e[0]<0||e[1]<0?i/2+a:i/2-a,o+=Math.sin(t/4)*i/6,0===r.roll(2)?o+=r.rollDie(i/5):o-=r.rollDie(i/5)}return o}}},{"d3-array":13,"d3-shape":16,probable:21}],8:[function(t,e,n){"use strict";var r=t("basic-browser-request"),i=t("./search-flickr"),o=t("./config"),a=t("probable"),s=t("call-next-tick"),c=t("./image-library-table-def"),u=t("./term-table-defs-for-libraries"),l=5,h=a.createTableFromSizes(c),f={"The British Library":"12403504@N02","US National Archives":"usnationalarchives","New York Public Library":"nypl","The Library of Congress":"library_of_congress","Internet Archive Book Images":"126377022@N07","Texas State Library":"txstate-library","Archivo Historico":"99115493@N08","National Library of Medicine":"nlmhmd","Museum of Hartlepool":"hartlepool_museum",NASA:"nasacommons"},p=i({flickrAPIKey:o.flickr.key,request:r});function _(t){return{url:"https://farm"+t.farm+".staticflickr.com/"+t.server+"/"+t.id+"_"+t.secret+".jpg",title:t.title,source:"https://www.flickr.com/photos/"+t.owner+"/"+t.id}}e.exports=function t(e,n){var r=e.numberOfMembers,i=e.retryCount,o=e.searchTerm,c=e.library;if(void 0===i&&(i=0),c||(c=h.roll()),!o){var d=a.createTableFromSizes(u[c]);o=d.roll()}console.log(o,c,"retryCount",i),p({term:o,userId:f[c]},function(e,u){if(e)if(e.notFound||u.length<r)if(i<l){var h={numberOfMembers:r,retryCount:i+1};s(t,h,n)}else n(e);else n(e);else f=u,p=a.shuffle(f).slice(0,r).map(_),n(null,{councilResults:p,searchTerm:o,library:c});var f,p})}},{"./config":3,"./image-library-table-def":9,"./search-flickr":34,"./term-table-defs-for-libraries":36,"basic-browser-request":11,"call-next-tick":12,probable:21}],9:[function(t,e,n){"use strict";e.exports=[[3,"The British Library"],[2,"US National Archives"],[1,"New York Public Library"],[2,"The Library of Congress"],[3,"Internet Archive Book Images"],[1,"Texas State Library"],[1,"Archivo Historico"],[2,"National Library of Medicine"],[2,"Museum of Hartlepool"],[1,"NASA"]]},{}],10:[function(t,e,n){function r(t){return t}"object"==typeof e&&"object"==typeof e.exports&&(e.exports=function(t,e){var n="id";return"identity"===t?r:(t&&"string"==typeof t&&(n=t),function(t){return"object"==typeof t?void 0===t[n]?e:t[n]:e})})},{}],11:[function(t,e,n){if("object"==typeof e&&"object"==typeof e.exports){var r={makeRequest:function(t,e){var n=t.json||"application/json"===t.mimeType,r=new XMLHttpRequest;if(r.open(t.method,t.url),t.mimeType&&r.setRequestHeader("content-type",t.mimeType),n&&r.setRequestHeader("accept","application/json"),"object"==typeof t.headers)for(var i in t.headers)r.setRequestHeader(i,t.headers[i]);t.binary&&(r.responseType="arraybuffer"),n&&"object"==typeof t.body&&(t.body=JSON.stringify(t.body));var o=null;r.onload=function(){if(clearTimeout(o),this.status>=200||this.status<300)if(t.binary)e(null,r.response);else{var i=this.responseText;n&&(i=JSON.parse(i)),e(null,r.response,i)}else e(new Error("Error while making request. XHR status: "+this.status),r.response)};var a=0;function s(){r.abort(),clearTimeout(o),e(new Error("Timed out"))}return t.onData&&(r.onreadystatechange=function(){3===r.readyState&&(t.onData(this.responseText.substr(a)),a=this.responseText.length)}),r.send(t.formData||t.body),t.timeLimit>0&&(o=setTimeout(s,t.timeLimit)),{url:t.url,cancelRequest:s}}};e.exports=r.makeRequest}},{}],12:[function(t,e,n){(function(t){Array.prototype.slice.call;e.exports=function(){var e=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){t.apply(t,e)}}.apply(null,Array.prototype.slice.call(arguments,0));t.nextTick(e)}}).call(this,t("_process"))},{_process:22}],13:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){var n;return 1===t.length&&(n=t,t=function(t,r){return e(n(t),r)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}var r=n(e),i=r.right,o=r.left;function a(t,e){return[t,e]}function s(t){return null===t?NaN:+t}function c(t,e){var n,r,i=t.length,o=0,a=-1,c=0,u=0;if(null==e)for(;++a<i;)isNaN(n=s(t[a]))||(u+=(r=n-c)*(n-(c+=r/++o)));else for(;++a<i;)isNaN(n=s(e(t[a],a,t)))||(u+=(r=n-c)*(n-(c+=r/++o)));if(o>1)return u/(o-1)}function u(t,e){var n=c(t,e);return n?Math.sqrt(n):n}function l(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}var h=Array.prototype,f=h.slice,p=h.map;function _(t){return function(){return t}}function d(t){return t}function y(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}var m=Math.sqrt(50),v=Math.sqrt(10),g=Math.sqrt(2);function b(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=m?10:o>=v?5:o>=g?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=m?10:o>=v?5:o>=g?2:1)}function x(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=m?i*=10:o>=v?i*=5:o>=g&&(i*=2),e<t?-i:i}function w(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function T(t,e,n){if(null==n&&(n=s),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function k(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}function A(t){if(!(i=t.length))return[];for(var e=-1,n=k(t,S),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function S(t){return t.length}t.bisect=i,t.bisectRight=i,t.bisectLeft=o,t.ascending=e,t.bisector=n,t.cross=function(t,e,n){var r,i,o,s,c=t.length,u=e.length,l=new Array(c*u);for(null==n&&(n=a),r=o=0;r<c;++r)for(s=t[r],i=0;i<u;++i,++o)l[o]=n(s,e[i]);return l},t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=u,t.extent=l,t.histogram=function(){var t=d,e=l,n=w;function r(r){var o,a,s=r.length,c=new Array(s);for(o=0;o<s;++o)c[o]=t(r[o],o,r);var u=e(c),l=u[0],h=u[1],f=n(c,l,h);Array.isArray(f)||(f=x(l,h,f),f=y(Math.ceil(l/f)*f,h,f));for(var p=f.length;f[0]<=l;)f.shift(),--p;for(;f[p-1]>h;)f.pop(),--p;var _,d=new Array(p+1);for(o=0;o<=p;++o)(_=d[o]=[]).x0=o>0?f[o-1]:l,_.x1=o<p?f[o]:h;for(o=0;o<s;++o)l<=(a=c[o])&&a<=h&&d[i(f,a,0,p)].push(r[o]);return d}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:_(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:_([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?_(f.call(t)):_(t),r):n},r},t.thresholdFreedmanDiaconis=function(t,n,r){return t=p.call(t,s).sort(e),Math.ceil((r-n)/(2*(T(t,.75)-T(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*u(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=w,t.max=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},t.mean=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=s(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=s(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},t.median=function(t,n){var r,i=t.length,o=-1,a=[];if(null==n)for(;++o<i;)isNaN(r=s(t[o]))||a.push(r);else for(;++o<i;)isNaN(r=s(n(t[o],o,t)))||a.push(r);return T(a.sort(e),.5)},t.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},t.min=k,t.pairs=function(t,e){null==e&&(e=a);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return o},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.quantile=T,t.range=y,t.scan=function(t,n){if(r=t.length){var r,i,o=0,a=0,s=t[a];for(null==n&&(n=e);++o<r;)(n(i=t[o],s)<0||0!==n(s,s))&&(s=i,a=o);return 0===n(s,s)?a:void 0}},t.shuffle=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},t.sum=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},t.ticks=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=b(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o},t.tickIncrement=b,t.tickStep=x,t.transpose=A,t.variance=c,t.zip=function(){return A(arguments)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],14:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e=Math.PI,n=2*e,r=n-1e-6;function i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new i}i.prototype=o.prototype={constructor:i,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,r,i,o){t=+t,n=+n,r=+r,i=+i,o=+o;var a=this._x1,s=this._y1,c=r-t,u=i-n,l=a-t,h=s-n,f=l*l+h*h;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>1e-6)if(Math.abs(h*c-u*l)>1e-6&&o){var p=r-a,_=i-s,d=c*c+u*u,y=p*p+_*_,m=Math.sqrt(d),v=Math.sqrt(f),g=o*Math.tan((e-Math.acos((d+f-y)/(2*m*v)))/2),b=g/v,x=g/m;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*l)+","+(n+b*h)),this._+="A"+o+","+o+",0,0,"+ +(h*p>l*_)+","+(this._x1=t+x*c)+","+(this._y1=n+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,i,o,a,s,c){t=+t,i=+i;var u=(o=+o)*Math.cos(a),l=o*Math.sin(a),h=t+u,f=i+l,p=1^c,_=c?a-s:s-a;if(o<0)throw new Error("negative radius: "+o);null===this._x1?this._+="M"+h+","+f:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+h+","+f),o&&(_<0&&(_=_%n+n),_>r?this._+="A"+o+","+o+",0,1,"+p+","+(t-u)+","+(i-l)+"A"+o+","+o+",0,1,"+p+","+(this._x1=h)+","+(this._y1=f):_>1e-6&&(this._+="A"+o+","+o+",0,"+ +(_>=e)+","+p+","+(this._x1=t+o*Math.cos(s))+","+(this._y1=i+o*Math.sin(s))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.path=o,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],15:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),n.hasOwnProperty(e)?{space:n[e],local:t}:t}function i(t){var n=r(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===e&&n.documentElement.namespaceURI===e?n.createElement(t):n.createElementNS(r,t)}})(n)}function o(){}function a(t){return null==t?o:function(){return this.querySelector(t)}}function s(){return[]}function c(t){return null==t?s:function(){return this.querySelectorAll(t)}}function u(t){return function(){return this.matches(t)}}function l(t){return new Array(t.length)}function h(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}h.prototype={constructor:h,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var f="$";function p(t,e,n,r,i,o){for(var a,s=0,c=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new h(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function _(t,e,n,r,i,o,a){var s,c,u,l={},p=e.length,_=o.length,d=new Array(p);for(s=0;s<p;++s)(c=e[s])&&(d[s]=u=f+a.call(c,c.__data__,s,e),u in l?i[s]=c:l[u]=c);for(s=0;s<_;++s)(c=l[u=f+a.call(t,o[s],s,o)])?(r[s]=c,c.__data__=o[s],l[u]=null):n[s]=new h(t,o[s]);for(s=0;s<p;++s)(c=e[s])&&l[d[s]]===c&&(i[s]=c)}function d(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function y(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function m(t,e){return t.style.getPropertyValue(e)||y(t).getComputedStyle(t,null).getPropertyValue(e)}function v(t){return t.trim().split(/^|\s+/)}function g(t){return t.classList||new b(t)}function b(t){this._node=t,this._names=v(t.getAttribute("class")||"")}function x(t,e){for(var n=g(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function w(t,e){for(var n=g(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function T(){this.textContent=""}function k(){this.innerHTML=""}function A(){this.nextSibling&&this.parentNode.appendChild(this)}function S(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function j(){return null}function N(){var t=this.parentNode;t&&t.removeChild(this)}function M(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function O(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}b.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var E={};(t.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(E={mouseenter:"mouseover",mouseleave:"mouseout"}));function P(t,e,n){return t=R(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function R(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function C(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function L(t,e,n){var r=E.hasOwnProperty(t.type)?P:R;return function(i,o,a){var s,c=this.__on,u=r(e,o,a);if(c)for(var l=0,h=c.length;l<h;++l)if((s=c[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},c?c.push(s):this.__on=[s]}}function I(t,e,n){var r=y(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var D=[null];function q(t,e){this._groups=t,this._parents=e}function U(){return new q([[document.documentElement]],D)}function B(t){return"string"==typeof t?new q([[document.querySelector(t)]],[document.documentElement]):new q([[t]],D)}q.prototype=U.prototype={constructor:q,select:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,c=e[i],u=c.length,l=r[i]=new Array(u),h=0;h<u;++h)(o=c[h])&&(s=t.call(o,o.__data__,h,c))&&("__data__"in o&&(s.__data__=o.__data__),l[h]=s);return new q(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new q(r,i)},filter:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new q(r,this._parents)},data:function(t,e){if(!t)return y=new Array(this.size()),l=-1,this.each(function(t){y[++l]=t}),y;var n,r=e?_:p,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),c=new Array(a),u=new Array(a),l=0;l<a;++l){var h=i[l],f=o[l],d=f.length,y=t.call(h,h&&h.__data__,l,i),m=y.length,v=c[l]=new Array(m),g=s[l]=new Array(m);r(h,f,v,g,u[l]=new Array(d),y,e);for(var b,x,w=0,T=0;w<m;++w)if(b=v[w]){for(w>=T&&(T=w+1);!(x=g[T])&&++T<m;);b._next=x||null}}return(s=new q(s,i))._enter=c,s._exit=u,s},enter:function(){return new q(this._enter||this._groups.map(l),this._parents)},exit:function(){return new q(this._exit||this._groups.map(l),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,u=e[s],l=n[s],h=u.length,f=a[s]=new Array(h),p=0;p<h;++p)(c=u[p]||l[p])&&(f[p]=c);for(;s<r;++s)a[s]=e[s];return new q(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=d);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],c=s.length,u=i[o]=new Array(c),l=0;l<c;++l)(a=s[l])&&(u[l]=a);u.sort(e)}return new q(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=r(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):m(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=v(t+"");if(arguments.length<2){for(var r=g(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?x:w)(this,t)}}:e?function(t){return function(){x(this,t)}}:function(t){return function(){w(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?T:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?k:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(A)},lower:function(){return this.each(S)},append:function(t){var e="function"==typeof t?t:i(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:i(t),r=null==e?j:"function"==typeof e?e:a(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(N)},clone:function(t){return this.select(t?O:M)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?L:C,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var c,u=0,l=s.length;u<l;++u)for(r=0,c=s[u];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return I(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return I(this,t,e)}})(t,e))}};var F=0;function H(){return new z}function z(){this._="@"+(++F).toString(36)}function V(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function Y(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}z.prototype=H.prototype={constructor:z,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.create=function(t){return B(i(t).call(document.documentElement))},t.creator=i,t.local=H,t.matcher=u,t.mouse=function(t){var e=V();return e.changedTouches&&(e=e.changedTouches[0]),Y(t,e)},t.namespace=r,t.namespaces=n,t.clientPoint=Y,t.select=B,t.selectAll=function(t){return"string"==typeof t?new q([document.querySelectorAll(t)],[document.documentElement]):new q([null==t?[]:t],D)},t.selection=U,t.selector=a,t.selectorAll=c,t.style=m,t.touch=function(t,e,n){arguments.length<3&&(n=e,e=V().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return Y(t,r);return null},t.touches=function(t,e){null==e&&(e=V().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Y(t,e[n]);return i},t.window=y,t.customEvent=function(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],16:[function(t,e,n){var r,i;r=this,i=function(t,e){"use strict";function n(t){return function(){return t}}var r=Math.abs,i=Math.atan2,o=Math.cos,a=Math.max,s=Math.min,c=Math.sin,u=Math.sqrt,l=1e-12,h=Math.PI,f=h/2,p=2*h;function _(t){return t>=1?f:t<=-1?-f:Math.asin(t)}function d(t){return t.innerRadius}function y(t){return t.outerRadius}function m(t){return t.startAngle}function v(t){return t.endAngle}function g(t){return t&&t.padAngle}function b(t,e,n,r,i,o,s){var c=t-n,l=e-r,h=(s?o:-o)/u(c*c+l*l),f=h*l,p=-h*c,_=t+f,d=e+p,y=n+f,m=r+p,v=(_+y)/2,g=(d+m)/2,b=y-_,x=m-d,w=b*b+x*x,T=i-o,k=_*m-y*d,A=(x<0?-1:1)*u(a(0,T*T*w-k*k)),S=(k*x-b*A)/w,j=(-k*b-x*A)/w,N=(k*x+b*A)/w,M=(-k*b+x*A)/w,O=S-v,E=j-g,P=N-v,R=M-g;return O*O+E*E>P*P+R*R&&(S=N,j=M),{cx:S,cy:j,x01:-f,y01:-p,x11:S*(i/T-1),y11:j*(i/T-1)}}function x(t){this._context=t}function w(t){return new x(t)}function T(t){return t[0]}function k(t){return t[1]}function A(){var t=T,r=k,i=n(!0),o=null,a=w,s=null;function c(n){var c,u,l,h=n.length,f=!1;for(null==o&&(s=a(l=e.path())),c=0;c<=h;++c)!(c<h&&i(u=n[c],c,n))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(u,c,n),+r(u,c,n));if(l)return s=null,l+""||null}return c.x=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),c):t},c.y=function(t){return arguments.length?(r="function"==typeof t?t:n(+t),c):r},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:n(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),c):o},c}function S(){var t=T,r=null,i=n(0),o=k,a=n(!0),s=null,c=w,u=null;function l(n){var l,h,f,p,_,d=n.length,y=!1,m=new Array(d),v=new Array(d);for(null==s&&(u=c(_=e.path())),l=0;l<=d;++l){if(!(l<d&&a(p=n[l],l,n))===y)if(y=!y)h=l,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=l-1;f>=h;--f)u.point(m[f],v[f]);u.lineEnd(),u.areaEnd()}y&&(m[l]=+t(p,l,n),v[l]=+i(p,l,n),u.point(r?+r(p,l,n):m[l],o?+o(p,l,n):v[l]))}if(_)return u=null,_+""||null}function h(){return A().defined(a).curve(c).context(s)}return l.x=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:n(+t),l):r},l.y=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),o=null,l):i},l.y0=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),l):i},l.y1=function(t){return arguments.length?(o=null==t?null:"function"==typeof t?t:n(+t),l):o},l.lineX0=l.lineY0=function(){return h().x(t).y(i)},l.lineY1=function(){return h().x(t).y(o)},l.lineX1=function(){return h().x(r).y(i)},l.defined=function(t){return arguments.length?(a="function"==typeof t?t:n(!!t),l):a},l.curve=function(t){return arguments.length?(c=t,null!=s&&(u=c(s)),l):c},l.context=function(t){return arguments.length?(null==t?s=u=null:u=c(s=t),l):s},l}function j(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function N(t){return t}x.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var M=E(w);function O(t){this._curve=t}function E(t){function e(e){return new O(t(e))}return e._curve=t,e}function P(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(E(t)):e()._curve},t}function R(){return P(A().curve(M))}function C(){var t=S().curve(M),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return P(n())},delete t.lineX0,t.lineEndAngle=function(){return P(r())},delete t.lineX1,t.lineInnerRadius=function(){return P(i())},delete t.lineY0,t.lineOuterRadius=function(){return P(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(E(t)):e()._curve},t}function L(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}O.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var I=Array.prototype.slice;function D(t){return t.source}function q(t){return t.target}function U(t){var r=D,i=q,o=T,a=k,s=null;function c(){var n,c=I.call(arguments),u=r.apply(this,c),l=i.apply(this,c);if(s||(s=n=e.path()),t(s,+o.apply(this,(c[0]=u,c)),+a.apply(this,c),+o.apply(this,(c[0]=l,c)),+a.apply(this,c)),n)return s=null,n+""||null}return c.source=function(t){return arguments.length?(r=t,c):r},c.target=function(t){return arguments.length?(i=t,c):i},c.x=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),c):o},c.y=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),c):a},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}function B(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function F(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function H(t,e,n,r,i){var o=L(e,n),a=L(e,n=(n+i)/2),s=L(r,n),c=L(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],c[0],c[1])}var z={draw:function(t,e){var n=Math.sqrt(e/h);t.moveTo(n,0),t.arc(0,0,n,0,p)}},V={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Y=Math.sqrt(1/3),G=2*Y,X={draw:function(t,e){var n=Math.sqrt(e/G),r=n*Y;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},W=Math.sin(h/10)/Math.sin(7*h/10),Q=Math.sin(p/10)*W,J=-Math.cos(p/10)*W,$={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=Q*n,i=J*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=p*o/5,s=Math.cos(a),c=Math.sin(a);t.lineTo(c*n,-s*n),t.lineTo(s*r-c*i,c*r+s*i)}t.closePath()}},K={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},Z=Math.sqrt(3),tt={draw:function(t,e){var n=-Math.sqrt(e/(3*Z));t.moveTo(0,2*n),t.lineTo(-Z*n,-n),t.lineTo(Z*n,-n),t.closePath()}},et=-.5,nt=Math.sqrt(3)/2,rt=1/Math.sqrt(12),it=3*(rt/2+1),ot={draw:function(t,e){var n=Math.sqrt(e/it),r=n/2,i=n*rt,o=r,a=n*rt+n,s=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,c),t.lineTo(et*r-nt*i,nt*r+et*i),t.lineTo(et*o-nt*a,nt*o+et*a),t.lineTo(et*s-nt*c,nt*s+et*c),t.lineTo(et*r+nt*i,et*i-nt*r),t.lineTo(et*o+nt*a,et*a-nt*o),t.lineTo(et*s+nt*c,et*c-nt*s),t.closePath()}},at=[z,V,X,K,$,tt,ot];function st(){}function ct(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ut(t){this._context=t}function lt(t){this._context=t}function ht(t){this._context=t}function ft(t,e){this._basis=new ut(t),this._beta=e}ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ct(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ct(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},lt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ct(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ct(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ft.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,c=-1;++c<=n;)r=c/n,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*e[c]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var pt=function t(e){function n(t){return 1===e?new ut(t):new ft(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function _t(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function dt(t,e){this._context=t,this._k=(1-e)/6}dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_t(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:_t(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var yt=function t(e){function n(t){return new dt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function mt(t,e){this._context=t,this._k=(1-e)/6}mt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_t(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var vt=function t(e){function n(t){return new mt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function gt(t,e){this._context=t,this._k=(1-e)/6}gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_t(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var bt=function t(e){function n(t){return new gt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function xt(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>l){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>l){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/h,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function wt(t,e){this._context=t,this._alpha=e}wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:xt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Tt=function t(e){function n(t){return e?new wt(t,e):new dt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function kt(t,e){this._context=t,this._alpha=e}kt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:xt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var At=function t(e){function n(t){return e?new kt(t,e):new mt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function St(t,e){this._context=t,this._alpha=e}St.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var jt=function t(e){function n(t){return e?new St(t,e):new gt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Nt(t){this._context=t}function Mt(t){return t<0?-1:1}function Ot(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Mt(o)+Mt(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Et(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Pt(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Rt(t){this._context=t}function Ct(t){this._context=new Lt(t)}function Lt(t){this._context=t}function It(t){this._context=t}function Dt(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function qt(t,e){this._context=t,this._t=e}function Ut(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Bt(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ft(t,e){return t[e]}function Ht(t){var e=t.map(zt);return Bt(t).sort(function(t,n){return e[t]-e[n]})}function zt(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function Vt(t){var e=t.map(Yt);return Bt(t).sort(function(t,n){return e[t]-e[n]})}function Yt(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}Nt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pt(this,this._t0,Et(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Pt(this,Et(this,n=Ot(this,t,e)),n);break;default:Pt(this,this._t0,n=Ot(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Ct.prototype=Object.create(Rt.prototype)).point=function(t,e){Rt.prototype.point.call(this,e,t)},Lt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Dt(t),i=Dt(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},t.arc=function(){var t=d,a=y,x=n(0),w=null,T=m,k=v,A=g,S=null;function j(){var n,d,y,m=+t.apply(this,arguments),v=+a.apply(this,arguments),g=T.apply(this,arguments)-f,j=k.apply(this,arguments)-f,N=r(j-g),M=j>g;if(S||(S=n=e.path()),v<m&&(d=v,v=m,m=d),v>l)if(N>p-l)S.moveTo(v*o(g),v*c(g)),S.arc(0,0,v,g,j,!M),m>l&&(S.moveTo(m*o(j),m*c(j)),S.arc(0,0,m,j,g,M));else{var O,E,P=g,R=j,C=g,L=j,I=N,D=N,q=A.apply(this,arguments)/2,U=q>l&&(w?+w.apply(this,arguments):u(m*m+v*v)),B=s(r(v-m)/2,+x.apply(this,arguments)),F=B,H=B;if(U>l){var z=_(U/m*c(q)),V=_(U/v*c(q));(I-=2*z)>l?(C+=z*=M?1:-1,L-=z):(I=0,C=L=(g+j)/2),(D-=2*V)>l?(P+=V*=M?1:-1,R-=V):(D=0,P=R=(g+j)/2)}var Y=v*o(P),G=v*c(P),X=m*o(L),W=m*c(L);if(B>l){var Q,J=v*o(R),$=v*c(R),K=m*o(C),Z=m*c(C);if(N<h&&(Q=function(t,e,n,r,i,o,a,s){var c=n-t,u=r-e,h=a-i,f=s-o,p=f*c-h*u;if(!(p*p<l))return[t+(p=(h*(e-o)-f*(t-i))/p)*c,e+p*u]}(Y,G,K,Z,J,$,X,W))){var tt=Y-Q[0],et=G-Q[1],nt=J-Q[0],rt=$-Q[1],it=1/c(((y=(tt*nt+et*rt)/(u(tt*tt+et*et)*u(nt*nt+rt*rt)))>1?0:y<-1?h:Math.acos(y))/2),ot=u(Q[0]*Q[0]+Q[1]*Q[1]);F=s(B,(m-ot)/(it-1)),H=s(B,(v-ot)/(it+1))}}D>l?H>l?(O=b(K,Z,Y,G,v,H,M),E=b(J,$,X,W,v,H,M),S.moveTo(O.cx+O.x01,O.cy+O.y01),H<B?S.arc(O.cx,O.cy,H,i(O.y01,O.x01),i(E.y01,E.x01),!M):(S.arc(O.cx,O.cy,H,i(O.y01,O.x01),i(O.y11,O.x11),!M),S.arc(0,0,v,i(O.cy+O.y11,O.cx+O.x11),i(E.cy+E.y11,E.cx+E.x11),!M),S.arc(E.cx,E.cy,H,i(E.y11,E.x11),i(E.y01,E.x01),!M))):(S.moveTo(Y,G),S.arc(0,0,v,P,R,!M)):S.moveTo(Y,G),m>l&&I>l?F>l?(O=b(X,W,J,$,m,-F,M),E=b(Y,G,K,Z,m,-F,M),S.lineTo(O.cx+O.x01,O.cy+O.y01),F<B?S.arc(O.cx,O.cy,F,i(O.y01,O.x01),i(E.y01,E.x01),!M):(S.arc(O.cx,O.cy,F,i(O.y01,O.x01),i(O.y11,O.x11),!M),S.arc(0,0,m,i(O.cy+O.y11,O.cx+O.x11),i(E.cy+E.y11,E.cx+E.x11),M),S.arc(E.cx,E.cy,F,i(E.y11,E.x11),i(E.y01,E.x01),!M))):S.arc(0,0,m,L,C,M):S.lineTo(X,W)}else S.moveTo(0,0);if(S.closePath(),n)return S=null,n+""||null}return j.centroid=function(){var e=(+t.apply(this,arguments)+ +a.apply(this,arguments))/2,n=(+T.apply(this,arguments)+ +k.apply(this,arguments))/2-h/2;return[o(n)*e,c(n)*e]},j.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),j):t},j.outerRadius=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),j):a},j.cornerRadius=function(t){return arguments.length?(x="function"==typeof t?t:n(+t),j):x},j.padRadius=function(t){return arguments.length?(w=null==t?null:"function"==typeof t?t:n(+t),j):w},j.startAngle=function(t){return arguments.length?(T="function"==typeof t?t:n(+t),j):T},j.endAngle=function(t){return arguments.length?(k="function"==typeof t?t:n(+t),j):k},j.padAngle=function(t){return arguments.length?(A="function"==typeof t?t:n(+t),j):A},j.context=function(t){return arguments.length?(S=null==t?null:t,j):S},j},t.area=S,t.line=A,t.pie=function(){var t=N,e=j,r=null,i=n(0),o=n(p),a=n(0);function s(n){var s,c,u,l,h,f=n.length,_=0,d=new Array(f),y=new Array(f),m=+i.apply(this,arguments),v=Math.min(p,Math.max(-p,o.apply(this,arguments)-m)),g=Math.min(Math.abs(v)/f,a.apply(this,arguments)),b=g*(v<0?-1:1);for(s=0;s<f;++s)(h=y[d[s]=s]=+t(n[s],s,n))>0&&(_+=h);for(null!=e?d.sort(function(t,n){return e(y[t],y[n])}):null!=r&&d.sort(function(t,e){return r(n[t],n[e])}),s=0,u=_?(v-f*b)/_:0;s<f;++s,m=l)c=d[s],l=m+((h=y[c])>0?h*u:0)+b,y[c]={data:n[c],index:s,value:h,startAngle:m,endAngle:l,padAngle:g};return y}return s.value=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,r=null,s):e},s.sort=function(t){return arguments.length?(r=t,e=null,s):r},s.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),s):i},s.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),s):o},s.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),s):a},s},t.areaRadial=C,t.radialArea=C,t.lineRadial=R,t.radialLine=R,t.pointRadial=L,t.linkHorizontal=function(){return U(B)},t.linkVertical=function(){return U(F)},t.linkRadial=function(){var t=U(H);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){var t=n(z),r=n(64),i=null;function o(){var n;if(i||(i=n=e.path()),t.apply(this,arguments).draw(i,+r.apply(this,arguments)),n)return i=null,n+""||null}return o.type=function(e){return arguments.length?(t="function"==typeof e?e:n(e),o):t},o.size=function(t){return arguments.length?(r="function"==typeof t?t:n(+t),o):r},o.context=function(t){return arguments.length?(i=null==t?null:t,o):i},o},t.symbols=at,t.symbolCircle=z,t.symbolCross=V,t.symbolDiamond=X,t.symbolSquare=K,t.symbolStar=$,t.symbolTriangle=tt,t.symbolWye=ot,t.curveBasisClosed=function(t){return new lt(t)},t.curveBasisOpen=function(t){return new ht(t)},t.curveBasis=function(t){return new ut(t)},t.curveBundle=pt,t.curveCardinalClosed=vt,t.curveCardinalOpen=bt,t.curveCardinal=yt,t.curveCatmullRomClosed=At,t.curveCatmullRomOpen=jt,t.curveCatmullRom=Tt,t.curveLinearClosed=function(t){return new Nt(t)},t.curveLinear=w,t.curveMonotoneX=function(t){return new Rt(t)},t.curveMonotoneY=function(t){return new Ct(t)},t.curveNatural=function(t){return new It(t)},t.curveStep=function(t){return new qt(t,.5)},t.curveStepAfter=function(t){return new qt(t,1)},t.curveStepBefore=function(t){return new qt(t,0)},t.stack=function(){var t=n([]),e=Bt,r=Ut,i=Ft;function o(n){var o,a,s=t.apply(this,arguments),c=n.length,u=s.length,l=new Array(u);for(o=0;o<u;++o){for(var h,f=s[o],p=l[o]=new Array(c),_=0;_<c;++_)p[_]=h=[0,+i(n[_],f,_,n)],h.data=n[_];p.key=f}for(o=0,a=e(l);o<u;++o)l[a[o]].index=o;return r(l,a),l}return o.keys=function(e){return arguments.length?(t="function"==typeof e?e:n(I.call(e)),o):t},o.value=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),o):i},o.order=function(t){return arguments.length?(e=null==t?Bt:"function"==typeof t?t:n(I.call(t)),o):e},o.offset=function(t){return arguments.length?(r=null==t?Ut:t,o):r},o},t.stackOffsetExpand=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}Ut(t,e)}},t.stackOffsetDiverging=function(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,c=0,u=t[e[0]].length;c<u;++c)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][c])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},t.stackOffsetNone=Ut,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}Ut(t,e)}},t.stackOffsetWiggle=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,c=0,u=0;s<i;++s){for(var l=t[e[s]],h=l[a][1]||0,f=(h-(l[a-1][1]||0))/2,p=0;p<s;++p){var _=t[e[p]];f+=(_[a][1]||0)-(_[a-1][1]||0)}c+=h,u+=f*h}n[a-1][1]+=n[a-1][0]=o,c&&(o-=u/c)}n[a-1][1]+=n[a-1][0]=o,Ut(t,e)}},t.stackOrderAppearance=Ht,t.stackOrderAscending=Vt,t.stackOrderDescending=function(t){return Vt(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,r=t.length,i=t.map(Yt),o=Ht(t),a=0,s=0,c=[],u=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],c.push(n)):(s+=i[n],u.push(n));return u.reverse().concat(c)},t.stackOrderNone=Bt,t.stackOrderReverse=function(t){return Bt(t).reverse()},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-path"],i):i(r.d3=r.d3||{},r.d3)},{"d3-path":14}],17:[function(t,e,n){e.exports=function(t){if(t){console.error(t,t.stack);var e="";t.name&&(e+=t.name+": "),e+=t.message,t.stack&&(e+=" | "+t.stack.toString()),function(t){var e=document.getElementById("status-message");e.textContent=t,e.classList.remove("hidden")}(e)}}},{}],18:[function(t,e,n){var r;"object"==typeof e&&"object"==typeof e.exports&&(e.exports=(r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),{randomId:function(t){for(var e,n="",i=0;i<t;++i)n+=(e=r)[~~(Math.random()*e.length)];return n}}))},{}],19:[function(t,e,n){(function(t){var r=200,i="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",s="[object Boolean]",c="[object Date]",u="[object Function]",l="[object GeneratorFunction]",h="[object Map]",f="[object Number]",p="[object Object]",_="[object RegExp]",d="[object Set]",y="[object String]",m="[object Symbol]",v="[object ArrayBuffer]",g="[object DataView]",b="[object Float32Array]",x="[object Float64Array]",w="[object Int8Array]",T="[object Int16Array]",k="[object Int32Array]",A="[object Uint8Array]",S="[object Uint8ClampedArray]",j="[object Uint16Array]",N="[object Uint32Array]",M=/\w*$/,O=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,P={};P[a]=P["[object Array]"]=P[v]=P[g]=P[s]=P[c]=P[b]=P[x]=P[w]=P[T]=P[k]=P[h]=P[f]=P[p]=P[_]=P[d]=P[y]=P[m]=P[A]=P[S]=P[j]=P[N]=!0,P["[object Error]"]=P[u]=P["[object WeakMap]"]=!1;var R="object"==typeof t&&t&&t.Object===Object&&t,C="object"==typeof self&&self&&self.Object===Object&&self,L=R||C||Function("return this")(),I="object"==typeof n&&n&&!n.nodeType&&n,D=I&&"object"==typeof e&&e&&!e.nodeType&&e,q=D&&D.exports===I;function U(t,e){return t.set(e[0],e[1]),t}function B(t,e){return t.add(e),t}function F(t,e,n,r){var i=-1,o=t?t.length:0;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function H(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function z(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function V(t,e){return function(n){return t(e(n))}}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var G,X=Array.prototype,W=Function.prototype,Q=Object.prototype,J=L["__core-js_shared__"],$=(G=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",K=W.toString,Z=Q.hasOwnProperty,tt=Q.toString,et=RegExp("^"+K.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=q?L.Buffer:void 0,rt=L.Symbol,it=L.Uint8Array,ot=V(Object.getPrototypeOf,Object),at=Object.create,st=Q.propertyIsEnumerable,ct=X.splice,ut=Object.getOwnPropertySymbols,lt=nt?nt.isBuffer:void 0,ht=V(Object.keys,Object),ft=Dt(L,"DataView"),pt=Dt(L,"Map"),_t=Dt(L,"Promise"),dt=Dt(L,"Set"),yt=Dt(L,"WeakMap"),mt=Dt(Object,"create"),vt=Ht(ft),gt=Ht(pt),bt=Ht(_t),xt=Ht(dt),wt=Ht(yt),Tt=rt?rt.prototype:void 0,kt=Tt?Tt.valueOf:void 0;function At(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function St(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function jt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Nt(t){this.__data__=new St(t)}function Mt(t,e){var n=Vt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Yt(t)}(t)&&Z.call(t,"callee")&&(!st.call(t,"callee")||tt.call(t)==a)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!Z.call(t,o)||i&&("length"==o||Bt(o,r))||n.push(o);return n}function Ot(t,e,n){var r=t[e];Z.call(t,e)&&zt(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function Et(t,e){for(var n=t.length;n--;)if(zt(t[n][0],e))return n;return-1}function Pt(t,e,n,r,i,o,O){var E;if(r&&(E=o?r(t,i,o,O):r(t)),void 0!==E)return E;if(!Wt(t))return t;var R=Vt(t);if(R){if(E=function(t){var e=t.length,n=t.constructor(e);e&&"string"==typeof t[0]&&Z.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!e)return function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(t,E)}else{var C=Ut(t),L=C==u||C==l;if(Gt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(C==p||C==a||L&&!o){if(H(t))return o?t:{};if(E=function(t){return"function"!=typeof t.constructor||Ft(t)?{}:(e=ot(t),Wt(e)?at(e):{});var e}(L?{}:t),!e)return function(t,e){return Lt(t,qt(t),e)}(t,function(t,e){return t&&Lt(e,Qt(e),t)}(E,t))}else{if(!P[C])return o?t:{};E=function(t,e,n,r){var i=t.constructor;switch(e){case v:return Ct(t);case s:case c:return new i(+t);case g:return function(t,e){var n=e?Ct(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case b:case x:case w:case T:case k:case A:case S:case j:case N:return function(t,e){var n=e?Ct(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,r);case h:return function(t,e,n){return F(e?n(z(t),!0):z(t),U,new t.constructor)}(t,r,n);case f:case y:return new i(t);case _:return(u=new(a=t).constructor(a.source,M.exec(a))).lastIndex=a.lastIndex,u;case d:return function(t,e,n){return F(e?n(Y(t),!0):Y(t),B,new t.constructor)}(t,r,n);case m:return o=t,kt?Object(kt.call(o)):{}}var o;var a,u}(t,C,Pt,e)}}O||(O=new Nt);var I=O.get(t);if(I)return I;if(O.set(t,E),!R)var D=n?function(t){return function(t,e,n){var r=e(t);return Vt(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Qt,qt)}(t):Qt(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(D||t,function(i,o){D&&(i=t[o=i]),Ot(E,o,Pt(i,e,n,r,o,t,O))}),E}function Rt(t){return!(!Wt(t)||$&&$ in t)&&(Xt(t)||H(t)?et:O).test(Ht(t))}function Ct(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function Lt(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=r?r(n[a],t[a],a,n,t):void 0;Ot(n,a,void 0===s?t[a]:s)}return n}function It(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Dt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Rt(n)?n:void 0}At.prototype.clear=function(){this.__data__=mt?mt(null):{}},At.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},At.prototype.get=function(t){var e=this.__data__;if(mt){var n=e[t];return n===i?void 0:n}return Z.call(e,t)?e[t]:void 0},At.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:Z.call(e,t)},At.prototype.set=function(t,e){return this.__data__[t]=mt&&void 0===e?i:e,this},St.prototype.clear=function(){this.__data__=[]},St.prototype.delete=function(t){var e=this.__data__,n=Et(e,t);return!(n<0||(n==e.length-1?e.pop():ct.call(e,n,1),0))},St.prototype.get=function(t){var e=this.__data__,n=Et(e,t);return n<0?void 0:e[n][1]},St.prototype.has=function(t){return Et(this.__data__,t)>-1},St.prototype.set=function(t,e){var n=this.__data__,r=Et(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},jt.prototype.clear=function(){this.__data__={hash:new At,map:new(pt||St),string:new At}},jt.prototype.delete=function(t){return It(this,t).delete(t)},jt.prototype.get=function(t){return It(this,t).get(t)},jt.prototype.has=function(t){return It(this,t).has(t)},jt.prototype.set=function(t,e){return It(this,t).set(t,e),this},Nt.prototype.clear=function(){this.__data__=new St},Nt.prototype.delete=function(t){return this.__data__.delete(t)},Nt.prototype.get=function(t){return this.__data__.get(t)},Nt.prototype.has=function(t){return this.__data__.has(t)},Nt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof St){var i=n.__data__;if(!pt||i.length<r-1)return i.push([t,e]),this;n=this.__data__=new jt(i)}return n.set(t,e),this};var qt=ut?V(ut,Object):function(){return[]},Ut=function(t){return tt.call(t)};function Bt(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||E.test(t))&&t>-1&&t%1==0&&t<e}function Ft(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Q)}function Ht(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function zt(t,e){return t===e||t!=t&&e!=e}(ft&&Ut(new ft(new ArrayBuffer(1)))!=g||pt&&Ut(new pt)!=h||_t&&"[object Promise]"!=Ut(_t.resolve())||dt&&Ut(new dt)!=d||yt&&"[object WeakMap]"!=Ut(new yt))&&(Ut=function(t){var e=tt.call(t),n=e==p?t.constructor:void 0,r=n?Ht(n):void 0;if(r)switch(r){case vt:return g;case gt:return h;case bt:return"[object Promise]";case xt:return d;case wt:return"[object WeakMap]"}return e});var Vt=Array.isArray;function Yt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!Xt(t)}var Gt=lt||function(){return!1};function Xt(t){var e=Wt(t)?tt.call(t):"";return e==u||e==l}function Wt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Qt(t){return Yt(t)?Mt(t):function(t){if(!Ft(t))return ht(t);var e=[];for(var n in Object(t))Z.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}e.exports=function(t){return Pt(t,!0,!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(t,e,n){var r=9007199254740991,i="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/;function c(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var u=Object.prototype,l=u.hasOwnProperty,h=u.toString,f=u.propertyIsEnumerable,p=Math.max;function _(t,e){var n=x(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&w(t)}(t)&&l.call(t,"callee")&&(!f.call(t,"callee")||h.call(t)==i)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,o=!!r;for(var a in t)!e&&!l.call(t,a)||o&&("length"==a||g(a,r))||n.push(a);return n}function d(t,e,n,r){return void 0===t||b(t,u[n])&&!l.call(r,n)?e:t}function y(t,e,n){var r=t[e];l.call(t,e)&&b(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function m(t){if(!T(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e,n,r,i=(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||u,e===r),o=[];for(var a in t)("constructor"!=a||!i&&l.call(t,a))&&o.push(a);return o}function v(t,e){return e=p(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,i=p(n.length-e,0),o=Array(i);++r<i;)o[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=o,c(t,this,a)}}function g(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||s.test(t))&&t>-1&&t%1==0&&t<e}function b(t,e){return t===e||t!=t&&e!=e}var x=Array.isArray;function w(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=T(t)?h.call(t):"";return e==o||e==a}(t)}function T(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var k,A=(k=function(t,e,n,r){!function(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=r?r(n[a],t[a],a,n,t):void 0;y(n,a,void 0===s?t[a]:s)}}(e,function(t){return w(t)?_(t,!0):m(t)}(e),t,r)},v(function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=k.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!T(n))return!1;var r=typeof e;return!!("number"==r?w(n)&&g(e,n.length):"string"==r&&e in n)&&b(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&k(t,a,n,i)}return t})),S=v(function(t){return t.push(void 0,d),c(A,void 0,t)});e.exports=S},{}],21:[function(t,e,n){function r(t){var e=Math.random,n=!0;function r(t){return Math.floor(e()*t)}function i(t){var e=t,n=e[e.length-1][0][1]-e[0][0][0]+1;function i(t){return function(t,e){e=+e;for(var n=0;n<t.length;++n){var r=t[n],i=r[0];if(e>=i[0]&&e<=i[1])return r[1]}}(e,t)}return{outcomeAtIndex:i,roll:function(){var t=i(r(n));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()},length:n,getRangesAndOutcomesArray:function(){return e}}}function o(t){var e=[],n=-1,r=function(t){var e=[];for(var n in t){var r=t[n];e.push([r,n])}return e}(t);return(r=r.sort(a)).forEach(function(t){var r=t[0],i=t[1],o=n+1,a=o+r-1;e.push([[o,a],i]),n=a}),e}function a(t,e){return t[0]>e[0]?-1:1}function s(t){return i(function(t){var e=[];for(var r in t){var i=u(r),o=t[r];if("object"==typeof o)if(Array.isArray(o))o=f(o);else if(n){var a=s(o);"function"==typeof a.roll&&(o=a.roll)}e.push([i,o])}return e.sort(c)}(t))}function c(t,e){return t[0][0]<e[0][0]?-1:1}function u(t){var e=t.split("-");if(!(e.length>2))return 1===e.length?[+t,+t]:[+e[0],+e[1]]}function l(t){return i(function(t){var e=0;return t.map(function(t){var n=t[0],r=t[1],i=e+n-1,o=[e,i];if(e=i+1,Array.isArray(r))if(s=r,Array.isArray(s)&&s.length>0&&Array.isArray(s[0])&&2===s[0].length&&"number"==typeof s[0][0]){var a=l(r);"function"==typeof a.roll&&(r=a.roll)}else r=f(r);var s;return[o,r]})}(t))}function h(t,e){return!t||"number"!=typeof t.length||t.length<1?e:t[r(t.length)]}function f(t,e){return function(){return h(t,e)}}function p(t,e){var n=[];return t.forEach(function(t){e.forEach(function(e){Array.isArray(t)||Array.isArray(e)?n.push(t.concat(e)):n.push([t,e])})}),n}function _(t){for(var e,n=t.length,i=Array(n),o=0;o<n;o++)(e=r(o+1))!==o&&(i[o]=i[e]),i[e]=t[o];return i}return t&&(t.random&&(e=t.random),void 0!==t.recurse&&(n=t.recurse)),{roll:r,rollDie:function(t){return 0===t?0:r(t)+1},createRangeTable:i,createRangeTableFromDict:function(t){return i(o(t))},createTableFromDef:s,createTableFromSizes:l,convertDictToRangesAndOutcomePairs:o,pickFromArray:h,pick:h,crossArrays:p,getCartesianProduct:function(t){return t.slice(1).reduce(p,t[0])},shuffle:_,sample:function(t,e){return _(t).slice(0,e)},randomFn:e}}var i=r();"object"==typeof e&&(e.exports=i,e.exports.createProbable=r)},{}],22:[function(t,e,n){var r,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,l=[],h=!1,f=-1;function p(){h&&u&&(h=!1,u.length?l=u.concat(l):f=-1,l.length&&_())}function _(){if(!h){var t=c(p);h=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||h||c(_)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],23:[function(t,e,n){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,i,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],24:[function(t,e,n){"use strict";var r=t("./stringify"),i=t("./parse"),o=t("./formats");e.exports={formats:o,parse:i,stringify:r}},{"./formats":23,"./parse":25,"./stringify":26}],25:[function(t,e,n){"use strict";var r=t("./utils"),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},s=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),s=a?r.slice(0,a.index):r,c=[];if(s){if(!n.plainObjects&&i.call(Object.prototype,s)&&!n.allowPrototypes)return;c.push(s)}for(var u=0;null!==(a=o.exec(r))&&u<n.depth;){if(u+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,i=t.length-1;i>=0;--i){var o,a=t[i];if("[]"===a&&n.parseArrays)o=[].concat(r);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(s,10);n.parseArrays||""!==s?!isNaN(c)&&a!==s&&String(c)===s&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[])[c]=r:o[s]=r:o={0:r}}r=o}return r}(c,e,n)}};e.exports=function(t,e){var n=function(t){if(!t)return o;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?o.charset:t.charset;return{allowDots:void 0===t.allowDots?o.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:o.comma,decoder:"function"==typeof t.decoder?t.decoder:o.decoder,delimiter:"string"==typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:o.delimiter,depth:"number"==typeof t.depth?t.depth:o.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling}}(e);if(""===t||null===t||void 0===t)return n.plainObjects?Object.create(null):{};for(var c="string"==typeof t?function(t,e){var n,s={},c=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,u=e.parameterLimit===1/0?void 0:e.parameterLimit,l=c.split(e.delimiter,u),h=-1,f=e.charset;if(e.charsetSentinel)for(n=0;n<l.length;++n)0===l[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===l[n]?f="utf-8":"utf8=%26%2310003%3B"===l[n]&&(f="iso-8859-1"),h=n,n=l.length);for(n=0;n<l.length;++n)if(n!==h){var p,_,d=l[n],y=d.indexOf("]="),m=-1===y?d.indexOf("="):y+1;-1===m?(p=e.decoder(d,o.decoder,f),_=e.strictNullHandling?null:""):(p=e.decoder(d.slice(0,m),o.decoder,f),_=e.decoder(d.slice(m+1),o.decoder,f)),_&&e.interpretNumericEntities&&"iso-8859-1"===f&&(_=a(_)),_&&e.comma&&_.indexOf(",")>-1&&(_=_.split(",")),i.call(s,p)?s[p]=r.combine(s[p],_):s[p]=_}return s}(t,n):t,u=n.plainObjects?Object.create(null):{},l=Object.keys(c),h=0;h<l.length;++h){var f=l[h],p=s(f,c[f],n);u=r.merge(u,p,n)}return r.compact(u)}},{"./utils":27}],26:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./formats"),o=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Array.isArray,c=Array.prototype.push,u=function(t,e){c.apply(t,s(e)?e:[e])},l=Date.prototype.toISOString,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,formatter:i.formatters[i.default],indices:!1,serializeDate:function(t){return l.call(t)},skipNulls:!1,strictNullHandling:!1},f=function t(e,n,i,o,a,c,l,f,p,_,d,y,m){var v=e;if("function"==typeof l?v=l(n,v):v instanceof Date?v=_(v):"comma"===i&&s(v)&&(v=v.join(",")),null===v){if(o)return c&&!y?c(n,h.encoder,m):n;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||r.isBuffer(v))return c?[d(y?n:c(n,h.encoder,m))+"="+d(c(v,h.encoder,m))]:[d(n)+"="+d(String(v))];var g,b=[];if(void 0===v)return b;if(s(l))g=l;else{var x=Object.keys(v);g=f?x.sort(f):x}for(var w=0;w<g.length;++w){var T=g[w];a&&null===v[T]||(s(v)?u(b,t(v[T],"function"==typeof i?i(n,T):n,i,o,a,c,l,f,p,_,d,y,m)):u(b,t(v[T],n+(p?"."+T:"["+T+"]"),i,o,a,c,l,f,p,_,d,y,m)))}return b};e.exports=function(t,e){var n,r=t,c=function(t){if(!t)return h;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||h.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(void 0!==t.format){if(!o.call(i.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r=i.formatters[n],a=h.filter;return("function"==typeof t.filter||s(t.filter))&&(a=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===t.allowDots?h.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:h.charsetSentinel,delimiter:void 0===t.delimiter?h.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:h.encode,encoder:"function"==typeof t.encoder?t.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:h.encodeValuesOnly,filter:a,formatter:r,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:h.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:h.strictNullHandling}}(e);"function"==typeof c.filter?r=(0,c.filter)("",r):s(c.filter)&&(n=c.filter);var l,p=[];if("object"!=typeof r||null===r)return"";l=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var _=a[l];n||(n=Object.keys(r)),c.sort&&n.sort(c.sort);for(var d=0;d<n.length;++d){var y=n[d];c.skipNulls&&null===r[y]||u(p,f(r[y],y,_,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var m=p.join(c.delimiter),v=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),m.length>0?v+m:""}},{"./formats":23,"./utils":27}],27:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Array.isArray,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n};e.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var o=e[r],a=o.obj[o.prop],s=Object.keys(a),c=0;c<s.length;++c){var u=s[c],l=a[u];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(e.push({obj:a,prop:u}),n.push(l))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(i(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(t){return r}},encode:function(t,e,n){if(0===t.length)return t;var r="string"==typeof t?t:String(t);if("iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"});for(var i="",a=0;a<r.length;++a){var s=r.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=r.charAt(a):s<128?i+=o[s]:s<2048?i+=o[192|s>>6]+o[128|63&s]:s<55296||s>=57344?i+=o[224|s>>12]+o[128|s>>6&63]+o[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&r.charCodeAt(a)),i+=o[240|s>>18]+o[128|s>>12&63]+o[128|s>>6&63]+o[128|63&s])}return i},isBuffer:function(t){return!(!t||"object"!=typeof t||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,o){if(!n)return e;if("object"!=typeof n){if(i(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(o&&(o.plainObjects||o.allowPrototypes)||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var s=e;return i(e)&&!i(n)&&(s=a(e,o)),i(e)&&i(n)?(n.forEach(function(n,i){if(r.call(e,i)){var a=e[i];a&&"object"==typeof a&&n&&"object"==typeof n?e[i]=t(a,n,o):e.push(n)}else e[i]=n}),e):Object.keys(n).reduce(function(e,i){var a=n[i];return r.call(e,i)?e[i]=t(e[i],a,o):e[i]=a,e},s)}}},{}],28:[function(t,e,n){var r=t("qs"),i=t("lodash.clonedeep"),o=t("lodash.defaults");e.exports=function({followRoute:t,windowObject:e}){var n={};return e.onhashchange=a,{addToRoute:function(e,r=!0){var a=o(i(e),s());c(a),r&&t(a,n)},removeFromRoute:function(e,r=!0){var i=s();delete i[e],c(i),r&&t(i,n)},updateEphemeralState:function(e,r=!0){for(var i in e)n[i]=e[i];r&&t(s(),n)},overwriteRouteEntirely:function(e){c(e),t(e,n)},routeFromHash:a,unpackEncodedRoute:function(e){var i=r.parse(decodeURIComponent(e));c(i),t(i,n)},getRouteFromHash:s};function a(){t(s(),n)}function s(){return r.parse(e.location.hash.slice(1))}function c(t){var n=e.location.protocol+"//"+e.location.host+e.location.pathname+"#"+r.stringify(t);e.history.pushState(null,null,n)}}},{"lodash.clonedeep":19,"lodash.defaults":20,qs:24}],29:[function(t,e,n){e.exports=function(t){var e;return t&&(e=t.log),function(t,n){return function(r){if(r)e&&(r.stack?e(r,r.stack):e(r)),n&&n(r);else if(t){var i=Array.prototype.slice.call(arguments,1);n&&i.push(n),t.apply(t,i)}}}}},{}],30:[function(t,e,n){"use strict";e.exports={makeProblemObject:function(t){return{id:t.id,text:t.text,choices:t.choices,councilSource:t.councilSource}},serializeProblemForRoute:function(t){return{id:t.id,text:t.text,choices:JSON.stringify(t.choices),councilSource:JSON.stringify(t.councilSource)}}}},{}],31:[function(t,e,n){"use strict";var r=t("d3-selection"),i=t("accessor"),o=t("./change-council"),a=t("handle-error-web"),s=t("./torn-paper-box-kit"),c=t("./waiting-message"),u=i(),l=c({messageElementSelector:"#display-problem .waiting-message"});e.exports=function(t){var e=t.problem,n=t.onDisplayProblemUpdate,c=t.onEdit,h=t.onRememberProblem,f=t.onNew,p=t.onList;r.selectAll("body > section:not(#display-problem)").classed("hidden",!0),document.body.scrollTop=0,r.select("#change-council-link").on("click",function(){l.show({message:"Gathering new blood for the council.."}),o(e,function(t,e){l.hide(),t?a(t):n(e)})});var _=r.select("#display-problem");_.classed("hidden",!1),_.select(".edit-button").on("click",function(){_.classed("hidden",!0),c()}),_.select(".remember-button").on("click",function(){h(e)}),_.select(".new-button").on("click",function(){f({waitingMessage:l})}),_.select(".list-button").on("click",p);var d=_.select(".choice-root").selectAll(".choice").data(e.choices,u);d.select(".presenter img"),d.exit().remove();var y=d.enter().append("li").classed("choice",!0).classed("centered-col",!0);y.append("div").classed("presenter",!0).append("a").classed("attribution-link",!0).append("img"),s.setUpTornPaperBoxes(y);var m=y.merge(d);m.attr("id",u),m.select(".presenter img").attr("src",i("presenterImageURL")).attr("alt",i("imageTitle")),m.select(".attribution-link").attr("href",i("imageSource")),m.select(".dialogue-text").text(i("text")),_.select(".problem .dialogue-text").text(e.text),s.renderTearsAfterDelay(_)}},{"./change-council":2,"./torn-paper-box-kit":37,"./waiting-message":38,accessor:10,"d3-selection":15,"handle-error-web":17}],32:[function(t,e,n){"use strict";var r=t("d3-selection"),i=t("./create-choice"),o=t("accessor"),a=t("standard-bail")(),s=t("handle-error-web"),c=t("./waiting-message"),u=o(),l=c({messageElementSelector:"#edit-problem .waiting-message"});e.exports=function(t){var e=t.problem,n=t.onEditProblemUpdate,c=t.onDisplay,h=t.onNew;document.body.scrollTop=0,r.selectAll("body > section:not(#edit-problem)").classed("hidden",!0);var f=r.select("#edit-problem");f.classed("hidden",!1),f.select(".add-choice-button").on("click",function(){l.show({message:"Summoning councilor for new choice…"}),i(e.councilSource,a(y,s))}),f.select(".view-button").on("click",function(){f.classed("hidden",!0),c()}),f.select(".new-button").on("click",function(){h({waitingMessage:l})}),f.select(".problem .dialogue-text").datum(e).text(e.text).on("blur",function(t){t.text=this.textContent,n(e)});var p=f.select(".choice-root").selectAll(".choice").data(e.choices,u);p.exit().remove();var _=p.enter().append("li").classed("choice",!0).classed("centered-col",!0);_.append("div").classed("dialogue-text",!0).attr("contenteditable",!0);var d=_.merge(p);function y(t){l.hide(),e.choices.push(t),n(e,!0)}d.attr("id",u),d.select(".dialogue-text").text(o("text")).on("blur",function(t){t.text=this.textContent,n(e)})}},{"./create-choice":4,"./waiting-message":38,accessor:10,"d3-selection":15,"handle-error-web":17,"standard-bail":29}],33:[function(t,e,n){"use strict";var r=t("d3-selection"),i=t("accessor"),o=t("./torn-paper-box-kit"),a=t("./waiting-message"),s=i(),c=a({messageElementSelector:"#list-problems .waiting-message"});e.exports=function(t){var e=t.problemsData,n=t.onNew,a=t.onDisplaySpecificProblem;r.selectAll("body > section:not(#list-problems)").classed("hidden",!0);var u=r.select("#list-problems");u.classed("hidden",!1),u.select(".new-button").on("click",function(){n({waitingMessage:c})});var l=u.select(".problems-root").selectAll(".problem").data(e,s);l.exit().remove();var h=l.enter().append("li").classed("problem",!0).classed("centered-col",!0);o.setUpTornPaperBoxes(h),h.selectAll("svg").on("click",a);var f=h.merge(l);f.attr("id",s),f.selectAll(".problem .dialogue-text").text(i("text")),o.renderTearsAfterDelay(u)}},{"./torn-paper-box-kit":37,"./waiting-message":38,accessor:10,"d3-selection":15}],34:[function(t,e,n){"use strict";var r=t("call-next-tick"),i=t("probable");e.exports=function(t){var e,n;return t&&(e=t.flickrAPIKey,n=t.request),function(t,a){var s=t.term,c=t.userId,u=t.pageToGet,l={method:"GET",url:function(t,n,r){var i="https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+e+"&user_id="+encodeURIComponent(n)+"&text="+t+"&format=json&nojsoncallback=1";return r&&(i+="&page="+r),i}(s,c,u),timeout:3e4,json:!0};n(l,function(t,e,n){if(t)a(t);else if("ok"!==n.stat||n.photos.photo.length<1){var l=new Error("Couldn't find image. Status:",n.stat);l.notFound=!0,a(l)}else u===n.photos.page?a(null,n.photos.photo):function(t,e){if(t.pages>1){var n={term:s,userId:c,pageToGet:i.rollDie(t.pages)};r(o,n,e)}else e(null,t.photo)}(n.photos,a)})};function o(t,a){var s=t.term,c=t.userId,u=t.pageToGet,l={method:"GET",url:function(t,n,r){var i="https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+e+"&user_id="+encodeURIComponent(n)+"&text="+t+"&format=json&nojsoncallback=1";r&&(i+="&page="+r);return i}(s,c,u),timeout:3e4,json:!0};n(l,function(t,e,n){if(t)a(t);else if("ok"!==n.stat||n.photos.photo.length<1){var l=new Error("Couldn't find image. Status:",n.stat);l.notFound=!0,a(l)}else u===n.photos.page?a(null,n.photos.photo):function(t,e){if(t.pages>1){var n={term:s,userId:c,pageToGet:i.rollDie(t.pages)};r(o,n,e)}else e(null,t.photo)}(n.photos,a)})}}},{"call-next-tick":12,probable:21}],35:[function(t,e,n){"use strict";var r={};if(localStorage.problems)try{r=JSON.parse(localStorage.problems)}catch(t){console.log(t,t.stack)}function i(){localStorage.problems=JSON.stringify(r)}function o(t,e){return t<e?-1:1}e.exports={rememberProblem:function(t){r[t.id]={problem:t,dateRemembered:new Date},i()},getProblem:function(t){return r[t].problem},forgetAllProblems:function(){r={},i()},getRememberedProblems:function(){return Object.values(r).sort(o).map(function(t){return t.problem})}}},{}],36:[function(t,e,n){"use strict";e.exports={"The British Library":[[3,"animal"],[2,"insect"],[1,"face"],[1,"head"],[2,"skeleton"],[1,"person"],[2,"portrait"],[2,"woman"],[2,"dance"]],"US National Archives":[[1,"animal"],[2,"bird"],[2,"child"],[2,"face"],[2,"man"],[2,"person"],[2,"portrait"],[2,"woman"],[2,"worker"]],"New York Public Library":[[2,"child"],[2,"man"],[2,"person"],[2,"portrait"],[2,"woman"]],"The Library of Congress":[[2,"animal"],[2,"child"],[1,"face"],[1,"man"],[3,"person"],[2,"portrait"],[3,"woman"]],"Internet Archive Book Images":[[2,"insect"],[2,"snake"],[4,"mammal"],[1,"dog"],[3,"cat"],[1,"forest"],[1,"tiger"],[2,"face"],[2,"person"],[2,"portrait"],[2,"woman"],[1,"skull"],[2,"owl"],[1,"dinosaur"]],"Texas State Library":[[1,"person"],[2,"portrait"]],"Archivo Historico":[[1,"portrait"],[1,"person"],[1,"man"],[2,"music"]],"National Library of Medicine":[[2,"woman"],[1,"person"],[1,"nurse"],[1,"skeleton"],[2,"poster"]],"Museum of Hartlepool":[[2,"people"],[1,"toy"]],NASA:[[2,"astronaut"],[1,"shuttle"],[1,"rocket"],[2,"planet"],[2,"moon"],[1,"space"]]}},{}],37:[function(t,e,n){"use strict";var r=t("d3-selection"),i=t("./draw-tear"),o=5;function a(t){return t.select(".dialogue-text").node().clientHeight}function s(t){return t.select(".dialogue-text").node().clientWidth}e.exports={setUpTornPaperBoxes:function(t){return t.append("svg").classed("dialogue-text-board",!0).append("foreignObject").attr("width","100%").attr("height","100%").attr("x",o).attr("y",o).append("xhtml:div").classed("dialogue-text-container",!0).append("xhtml:div").classed("dialogue-text",!0),t},renderTearsAfterDelay:function(t){setTimeout(function(){!function(t){t.selectAll("foreignObject").attr("width",function(){return s(r.select(this))}).attr("height",function(){return a(r.select(this))}),t.attr("width",function(){return s(r.select(this))+2*o}).attr("height",function(){return a(r.select(this))+2*o});var e=t.selectAll(".tear-path").data([[0,-1],[0,1],[-1,0],[1,0]]);e.enter().append("path").classed("tear-path",!0).merge(e).attr("d",function(t){var e={direction:t,maxThickness:o},n="height";return 0===t[0]&&(n="width"),e.length=r.select(this.parentNode).attr(n),i(e)}).attr("transform",function(t){var e=0,n=0;return t[0]>0&&(e=r.select(this.parentNode).attr("width")-o-1),t[1]>0&&(n=r.select(this.parentNode).attr("height")-o-1),"translate("+e+", "+n+")"})}(t.selectAll(".dialogue-text-board"))},300)}}},{"./draw-tear":7,"d3-selection":15}],38:[function(t,e,n){"use strict";var r=t("d3-selection");e.exports=function(t){var e=t.messageElementSelector,n=r.select(e);return{show:function(t){var e=t.message;n.text(e),n.classed("animate-waiting",!0),n.classed("hidden",!1)},hide:function(){n.classed("animate-waiting",!1),n.classed("hidden",!0)}}}},{"d3-selection":15}]},{},[1]);